# Проект по парсингу и анализу котировок акций банков

## Команда

Квадрат

## Описание проекта:

Цель данного проекта - cобрать данные по котировкам акций трех крупных российских банков: Сбер, ВТБ и Т-Банк, обработать данные, поcчитать на их основе определенные показатели, визуализировать, сформулировать и проверить гипотезы, возникшие в процессе анализа.

Задачи проекта:
1. Спарсить данные с сайта Мосбиржи по котировкам акций трех банков
2. Описать переменные 
3. Рассчитать собственные признаки (включая доходность)
4. Построить корреляционные тепловые карты, графики динамики, гистограммы, ящики с усами, violinplots, графики рассеивания
5. Снабдить выводами информацию на графиках
6. Сформулировать гипотезы
7. Проверить гипотезы (с помощью Z-тестирования и бутстрапа)

## Источник данных

https://www.moex.com/

## План:

1. Выбор темы
2. Сбор данных (парсинг)
3. Предварительная обработка
4. Создание новых признаков
5. Визуализация и анализ данных
6. Гипотезы
7. Выводы

## Структура проекта:

* Таблицы (в папке data):
  * `sber.csv` - данные по акциям Сбербанка
  * `tcsg.csv` - данные по акциям Т-Банка
  * `vtbr.csv` - данные по акциям банка ВТБ

* Файлы:
  * `README.md` - то, что вы сейчас читаете
  * `data-analysis-project.ipynb` - тетрадка с анализом, визуализацией и выводами
  * `parser.py` - файл с функцией для парсинга
  * `parsing.ipynb` - тетрадка с кодом для парсинга
  * `requirements.txt` - список необходимых для работы с репозиторием библиотек
  
## Предполагаемые гипотезы:

* **№ 1** | H0: Акции банков имеют в среднем равные доходности.

* **№ 2** | H0: В среднем доходности равны 0.

## Выводы о проделанной работе:

Мы проделали работу по парсингу, обработке данных, созданию новых признаков, визуализации и анализу данных, строили гипотезы и тестировали их.

Пропуски в данных связаны с отсутствием торгов в определённые дни, техническими сбоями или низкой ликвидностью, поэтому команда решила их не заполнять. Были созданы новые признаки, включая индикатор торгов, разброс цен, темп прироста акций и сделок, доходность. Основные периоды отсутствия торгов пришлись на март 2022 года из-за приостановки торгов Московской биржей. Анализ показал, что у Сбера средняя цена – 241 руб., у ВТБ – 152 руб., у Т-Банка – 3244 руб., а доходность всех трёх акций в среднем около нуля. Показатели цены акций сильно коррелируют между собой (около 0,99), тогда как доходность коррелирует только с индикатором тренда (0,7–0,8), что объясняется схожестью расчётов.

До 2022 года число сделок у всех трёх банков колебалось, причём у ВТБ были сильные скачки в 2021 году. В начале 2022 года сделки резко возросли из-за политического кризиса, затем торги приостановили, а после их возобновления колебания продолжились с разной динамикой. Анализ показал наличие выбросов в распределении числа сделок, а также высокую корреляцию цен открытия и закрытия, причём до конца 2021 года они росли, затем упали в 2022 году, а в последующие годы демонстрировали разные тренды: у Сбера и ВТБ сначала рост, потом падение, у Т-Банка аналогично, но более плавно. Разрыв цен в среднем был нулевым, но перед заморозкой торгов резко падал. Нормализация цен выявила положительную корреляцию между банками. Темп прироста числа акций в среднем был чуть больше нуля с положительными выбросами. Гистограммы цен показали основные диапазоны: у Сбера 200–350 руб., у ВТБ 0–150 руб., у Т-Банка 1000–4000 руб. Доходности распределены нормально с нулевым мат. ожиданием, а темпы прироста сделок сконцентрированы в диапазоне от -1 до 1, с более длинным правым хвостом из-за особенностей расчёта.

Поскольку Z-статистика во всех случаях попадает в доверительный интервал, различия в доходностях акций Сбера, ВТБ и Т-Банка не являются статистически значимыми. Это означает, что нет существенного перевеса в доходности акций одного банка над другим. В среднем доходности акций всех 3 банков равны 0. Это было показано с помощью бутстрапа. Обе гипотезы подтвердились.
